"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[689],{2989:function(O,d,t){t.r(d),t.d(d,{default:function(){return C}});var D=t(15558),c=t.n(D),j=t(48305),f=t.n(j),l=t(75271),r=t(50862),e=t(52676);function C(m){var g=m.role,s=g===void 0?"buyer":g,h=m.wsUrl,p=h===void 0?"ws://https://api.xxzh.cc":h,w=(0,l.useState)([]),x=f()(w,2),b=x[0],v=x[1],M=(0,l.useState)(""),y=f()(M,2),_=y[0],E=y[1],o=(0,l.useRef)(null),u=(0,l.useRef)(null);(0,l.useEffect)(function(){return o.current=new window.WebSocket(p),o.current.onopen=function(){r.FN.show({icon:"success",content:"\u5DF2\u8FDE\u63A5\u670D\u52A1\u5668"})},o.current.onmessage=function(n){try{var a=JSON.parse(n.data);v(function(i){return[].concat(c()(i),[a])})}catch(i){}},o.current.onerror=function(){r.FN.show({icon:"fail",content:"WebSocket \u8FDE\u63A5\u5931\u8D25"})},o.current.onclose=function(){r.FN.show({icon:"fail",content:"WebSocket \u5DF2\u65AD\u5F00"})},function(){o.current&&o.current.close()}},[p]),(0,l.useEffect)(function(){u.current&&(u.current.scrollTop=u.current.scrollHeight)},[b]);var S=function(){if(_.trim()){var a={from:s,content:_,time:new Date().toLocaleTimeString()};o.current.send(JSON.stringify(a)),v(function(i){return[].concat(c()(i),[a])}),E("")}};return(0,e.jsx)("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #f5f7fa 0%, #e3e8ee 100%)",padding:"0 0 32px 0"},children:(0,e.jsxs)(r.Zb,{style:{maxWidth:480,margin:"32px auto 0",borderRadius:14,boxShadow:"0 4px 16px rgba(60,80,120,0.08)",background:"#fff"},bodyStyle:{padding:"18px 0 8px 0"},children:[(0,e.jsx)("div",{style:{textAlign:"center",fontSize:21,fontWeight:700,marginBottom:18,color:"#223",letterSpacing:1},children:"\u5356\u5BB6/\u4E70\u5BB6\u804A\u5929"}),(0,e.jsx)("div",{ref:u,style:{maxHeight:400,overflowY:"auto",padding:"0 12px 8px 12px",background:"#f7f9fa",borderRadius:8},children:(0,e.jsx)(r.aV,{style:{"--border-top":"none","--border-bottom":"none"},children:b.map(function(n,a){return(0,e.jsx)(r.aV.Item,{style:{justifyContent:n.from===s?"flex-end":"flex-start",display:"flex",background:"none",border:"none",padding:0},children:(0,e.jsxs)("div",{style:{maxWidth:"70%",marginLeft:n.from===s?"auto":0,marginRight:n.from===s?0:"auto",background:n.from===s?"#4a90e2":"#fff",color:n.from===s?"#fff":"#333",borderRadius:12,padding:"8px 14px",fontSize:15,boxShadow:"0 2px 8px rgba(60,80,120,0.06)",marginBottom:8},children:[(0,e.jsx)("div",{style:{fontWeight:600,fontSize:13,marginBottom:2},children:n.from==="buyer"?"\u4E70\u5BB6":"\u5356\u5BB6"}),(0,e.jsx)("div",{children:n.content}),(0,e.jsx)("div",{style:{fontSize:11,color:"#bbb",textAlign:"right",marginTop:2},children:n.time})]})},a)})})}),(0,e.jsxs)("div",{style:{display:"flex",alignItems:"center",marginTop:12,padding:"0 12px"},children:[(0,e.jsx)(r.II,{placeholder:"\u8BF7\u8F93\u5165\u6D88\u606F",value:_,onChange:E,onEnterPress:S,clearable:!0,style:{flex:1,marginRight:8}}),(0,e.jsx)(r.zx,{color:"primary",onClick:S,disabled:!_.trim(),children:"\u53D1\u9001"})]})]})})}}}]);
