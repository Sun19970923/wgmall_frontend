"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[159],{23732:function(A,w,r){r.d(w,{$A:function(){return R},FL:function(){return L},H:function(){return O},IL:function(){return N},JR:function(){return g},Kn:function(){return s},S4:function(){return Z},Ue:function(){return d},Uy:function(){return B},Vb:function(){return z},_U:function(){return i},an:function(){return C},bZ:function(){return F},eY:function(){return K},iJ:function(){return P},jw:function(){return M},nn:function(){return W},o$:function(){return c},sg:function(){return b},um:function(){return o},vZ:function(){return J},wX:function(){return T},x4:function(){return S},yw:function(){return t},z2:function(){return _}});var n=r(48047),m=r(53827),y=m.Z.create({baseURL:"https://api.xxzh.cc",withCredentials:!1,crossDomain:!0,timeout:1e4});function c(e){return y({url:"/user/captcha/getCaptcha",withCredentials:!1,method:"get",params:e})}function C(e){return(0,n.Z)({url:"/user/captcha/getCaptcha",withCredentials:!1,method:"get",params:e})}function _(e){return(0,n.Z)({url:"/auth/register",withCredentials:!1,method:"post",data:e})}function o(e){return(0,n.Z)({url:"/user/user-detail/"+e.userId,withCredentials:!1,method:"get"})}function l(e){return request({url:"/wishlist/"+e.userId,withCredentials:!1,method:"get"})}function t(e){return(0,n.Z)({url:"/message/inbox",withCredentials:!1,method:"get",params:e})}function d(e){var $=e.id;return delete e.id,(0,n.Z)({url:"/address/create?userId="+$,withCredentials:!1,method:"post",data:e})}function s(e){return(0,n.Z)({url:"/address/get",withCredentials:!1,method:"get",params:e})}function i(e){return(0,n.Z)({url:"/address/update?userId="+e.id,withCredentials:!1,method:"post",data:e})}function h(e){return request({url:"/redbag/draw",withCredentials:!1,method:"post",data:e})}function p(e){return request({url:"/user/profit",withCredentials:!1,method:"get",params:e})}function S(e){return(0,n.Z)({url:"/auth/login",withCredentials:!1,method:"post",data:e})}function a(e){return request({url:"/redbag/signin",withCredentials:!1,method:"post",data:e})}function M(e){return(0,n.Z)({url:"/redbag/signin-and-draw",withCredentials:!1,method:"post",data:e})}function W(e){return(0,n.Z)({url:"/seller/apply",withCredentials:!1,method:"post",data:e})}function P(e){return(0,n.Z)({url:"/loan/apply",withCredentials:!1,method:"post",data:e})}function O(e){return(0,n.Z)({url:"/loan/loan",withCredentials:!1,method:"post",data:e})}function Z(e){return(0,n.Z)({url:"/loan/repay",withCredentials:!1,method:"post",data:e})}function N(e){return(0,n.Z)({url:"/withdrawal-records/user",withCredentials:!1,method:"post",data:e})}function F(e){return(0,n.Z)({url:"/recharge-records/username",withCredentials:!1,method:"get",params:e})}function T(e){return(0,n.Z)({url:"/recharge-records/user",withCredentials:!1,method:"post",data:e})}function g(e){return(0,n.Z)({url:"/withdrawal-records/username",withCredentials:!1,method:"get",params:e})}function L(e){return(0,n.Z)({url:"/shop/user/"+e,withCredentials:!1,method:"get"})}function K(e){return(0,n.Z)({url:"/user/info/"+e,withCredentials:!1,method:"get"})}function B(e){return(0,n.Z)({url:"/products/uploader-to-userid?uploader="+e.uploader,withCredentials:!1,method:"get"})}function b(e){return(0,n.Z)({url:"/user/eth/get",withCredentials:!1,method:"get",params:e})}function z(e){return(0,n.Z)({url:"/user/tron/get",withCredentials:!1,method:"get",params:e})}function J(e){return(0,n.Z)({url:"/user/eth/set",withCredentials:!1,method:"put",data:e})}function R(e){return(0,n.Z)({url:"/user/tron/set",withCredentials:!1,method:"put",data:e})}function x(){return fetch("https://api.ipify.org?format=json")}},48047:function(A,w,r){var n=r(31759),m=r.n(n),y=r(53827),c=r(50862),C=r(49634),_=y.Z.create({baseURL:"https://api.xxzh.cc",withCredentials:!1,crossDomain:!0,timeout:1e5});_.interceptors.request.use(function(o){if(o.url==="/auth/register"||o.url==="/auth/login")return o;(o.url==="/user/apply"||o.url==="/loan/apply")&&(o.headers["Content-Type"]="multipart/form-data");var l=localStorage.getItem("token");return l&&(o.headers.Authorization="Bearer "+l),o},function(o){return console.log(o),Promise.reject(o)}),_.interceptors.response.use(function(o){var l,t=o.data;if(console.log("response-->",t),Array.isArray(t))return Promise.resolve(t);if((l=t.data)!==null&&l!==void 0&&l.token&&(localStorage.setItem("token",t.data.token),localStorage.setItem("userInfo",JSON.stringify(t.data.user))),t.code!==200)return c.FN.show({icon:"fail",content:t.message}),Promise.resolve(t);if(t.code===200||t.message==="SUCCESS")return Promise.resolve(t);if(t.code===305||t.code===306){Promise.reject(t||"error");return}else return t.code===403?(c.FN.show({icon:"fail",content:t.message}),C.history.push("/login"),Promise.resolve(t||"error")):Promise.reject(t||"error")},function(o){return console.log(o,"error"),o.status===403&&(c.FN.show({icon:"fail",content:o.message}),localStorage.removeItem("token"),setTimeout(function(){C.history.push("/login")},1e3)),console.log("request error"+o,m()(o)),Promise.reject(o)}),w.Z=_},4090:function(A,w,r){r.d(w,{Bi:function(){return _},Vj:function(){return o},c9:function(){return l},dN:function(){return C}});var n=r(25298),m=r.n(n),y=r(17069),c=r.n(y);function C(t){return isNaN(t)?"0.00":Number(t).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function _(t){var d=new Date(t),s=d.getFullYear(),i=String(d.getMonth()+1).padStart(2,"0"),h=String(d.getDate()).padStart(2,"0"),p="".concat(s,"-").concat(i,"-").concat(h);return p}function o(t,d,s){for(var i={},h=100/s,p=0;p<=s;p++){var S=p*h,a=(t+(d-t)*S/100).toFixed(2);i[S]=parseFloat(a)}return i}var l=function(){function t(d){m()(this,t),this.url=d,this.ws=null,this.listeners=[],this.onOpenCallbacks=[]}return c()(t,[{key:"connect",value:function(){var s=this;this.ws||(this.ws=new window.WebSocket(this.url),this.ws.onopen=function(){s.onOpenCallbacks.forEach(function(i){return i()})},this.ws.onmessage=function(i){var h=i.data;try{h=JSON.parse(h)}catch(p){}s.listeners.forEach(function(p){return p(h)})})}},{key:"send",value:function(s){console.log(this.ws,"this.ws"),!(!this.ws||this.ws.readyState!==1)&&(typeof s!="string"&&(s=JSON.stringify(s)),this.ws.send(s))}},{key:"onMessage",value:function(s){this.listeners.push(s)}},{key:"close",value:function(){this.ws&&(this.ws.close(),this.ws=null)}},{key:"onOpen",value:function(s){this.onOpenCallbacks.push(s)}}]),t}()},48452:function(A,w,r){var n=r(50862),m=r(75271),y=r(5791),c=r(52676),C=function(o){var l=o.title,t=(0,y.s0)(),d=function(){t(-1)};return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(n.l2,{onBack:d,style:{background:"#fff",position:"sticky",top:0,zIndex:1e3},children:l})})};w.Z=C},36986:function(A,w,r){r.r(w),r.d(w,{default:function(){return W}});var n=r(15558),m=r.n(n),y=r(90228),c=r.n(y),C=r(87999),_=r.n(C),o=r(48305),l=r.n(o),t=r(75271),d=r(48452),s=r(50862),i={wallect:"wallect___mFatq",customBody:"customBody___YDZuD",datas:"datas___Q1xT0",data_item:"data_item___u8TX9",item:"item___WalgF",amount:"amount___b0Phc"},h=r(23732),p=r(5791),S=r(4090),a=r(52676),M=[{key:"0",title:"\u5145\u503C\u8BB0\u5F55"},{key:"1",title:"\u63D0\u73B0\u8BB0\u5F55"}];function W(){var P,O,Z,N=(0,p.s0)(),F=(0,t.useState)({}),T=l()(F,2),g=T[0],L=T[1],K=(0,t.useState)(0),B=l()(K,2),b=B[0],z=B[1],J=(0,t.useState)(0),R=l()(J,2),x=R[0],e=R[1],$=(0,t.useState)([]),Y=l()($,2),U=Y[0],Q=Y[1],te=(0,t.useState)(!0),G=l()(te,2),re=G[0],H=G[1],ne=(0,t.useState)(!0),X=l()(ne,2),V=X[0],q=X[1],ae=function(){var u=_()(c()().mark(function E(){var D,j;return c()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return D=JSON.parse(localStorage.getItem("userInfo")),v.next=3,(0,h.um)({userId:D.id});case 3:j=v.sent,localStorage.setItem("userInfo",JSON.stringify(j.data.user)),L(j.data);case 6:case"end":return v.stop()}},E)}));return function(){return u.apply(this,arguments)}}(),se=function(){var u=_()(c()().mark(function E(){var D,j,k,v,I=arguments;return c()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(D=I.length>0&&I[0]!==void 0?I[0]:0,j=I.length>1&&I[1]!==void 0?I[1]:0,k=JSON.parse(localStorage.getItem("userInfo")),D){f.next=9;break}return f.next=6,(0,h.bZ)({page:x,size:10,username:k.username});case 6:f.t0=f.sent,f.next=12;break;case 9:return f.next=11,(0,h.JR)({page:x,size:10,username:k.username});case 11:f.t0=f.sent;case 12:if(v=f.t0,e(x+1),v.data.length!=0){f.next=16;break}return f.abrupt("return",H(!1));case 16:Q(function(ee){return[].concat(m()(ee),m()(v.data)).length>=v.pagination.totalItems&&H(!1),[].concat(m()(ee),m()(v.data))});case 17:case"end":return f.stop()}},E)}));return function(){return u.apply(this,arguments)}}(),oe=function(){N("/order/recharge")},ue=function(){N("/order/withdraw")};return(0,t.useEffect)(function(){console.log(V,b,x,U),!V&&x===0&&U.length===0&&(H(!0),q(!0))},[b,x,V,U]),(0,t.useEffect)(function(){ae()},[]),(0,a.jsxs)("div",{style:{minHeight:"100vh",background:"#fff",padding:"0 0 32px 0"},className:i.address,children:[(0,a.jsx)(d.Z,{title:"\u6211\u7684\u94B1\u5305",style:{height:"100px"}}),(0,a.jsxs)("div",{className:i.wallect,children:[(0,a.jsxs)(s.Zb,{headerStyle:{color:"#1677ff"},bodyClassName:i.customBody,title:"",children:[(0,a.jsx)("h2",{children:"Account balance"}),(0,a.jsxs)("h1",{children:["$",(0,S.dN)((g==null||(P=g.user)===null||P===void 0?void 0:P.fakeBalance)||0)]}),(0,a.jsx)(s.iz,{}),(0,a.jsxs)("div",{className:i.datas,children:[(0,a.jsxs)("div",{className:i.data_item,children:[(0,a.jsx)("h3",{children:(0,S.dN)((g==null||(O=g.profit)===null||O===void 0?void 0:O.total)||0)}),(0,a.jsx)("p",{children:"Cumulative income"})]}),(0,a.jsxs)("div",{className:i.data_item,children:[(0,a.jsx)("h3",{children:(0,S.dN)((g==null||(Z=g.profit)===null||Z===void 0?void 0:Z.today)||0)}),(0,a.jsx)("p",{children:"Earnings today"})]})]}),(0,a.jsxs)(s.T,{justify:"between",block:!0,children:[(0,a.jsx)(s.zx,{color:"primary",fill:"solid",style:{width:120,background:"linear-gradient(90deg, #bfa14a 0%, #ffe082 100%)",border:"none",fontWeight:600,fontSize:16,letterSpacing:1,color:"#232526",boxShadow:"0 2px 8px rgba(191,161,74,0.10)"},onClick:oe,children:"\u5145\u503C"}),(0,a.jsx)(s.zx,{color:"primary",fill:"outline",style:{width:120,borderColor:"#ffe082",color:"#333",fontWeight:600,fontSize:16,letterSpacing:1,background:"rgba(191,161,74,0.10)",boxShadow:"0 2px 8px rgba(191,161,74,0.10)"},onClick:ue,children:"\u63D0\u73B0"})]})]}),(0,a.jsx)(s.mQ,{activeKey:M[b].key,style:{"--title-font-size":"18px","--content-padding":"18px","--active-line-color":"#333","--active-title-color":"#333"},onChange:function(E){var D=M.findIndex(function(j){return j.key===E});z(D),Q([]),q(!1),e(0)},children:M.map(function(u){return(0,a.jsx)(s.mQ.Tab,{title:u.title},u.key)})}),U.length>0?(0,a.jsx)(s.aV,{style:{"--border-top":"none","--border-bottom":"none"},children:U.map(function(u){return(0,a.jsx)(s.aV.Item,{style:{fontWeight:u.unread?700:400,background:u.unread?"linear-gradient(90deg, #f5f7fa 0%, #fff 100%)":"#fff",borderRadius:8,margin:"8px 16px",boxShadow:u.unread?"0 2px 8px rgba(60,80,120,0.06)":"none"},children:(0,a.jsxs)("div",{className:i.item,style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{children:["\u72B6\u6001\uFF1A",u.status]}),(0,a.jsxs)("p",{children:["\u7F16\u53F7\uFF1A",u.rechargeNumber?u.rechargeNumber:u.withdrawalNumber]}),(0,a.jsxs)("p",{children:["\u65F6\u95F4\uFF1A",u.rechargeTime?u.rechargeTime:u.withdrawalTime]})]}),(0,a.jsxs)("div",{className:i.amount,style:{color:b=="0"?"#ff6767":"#44a53b"},children:[b=="1"?"-":"+","  ",u.amount]})]})},u.id)})}):(0,a.jsx)(s.HY,{style:{padding:"64px 0"},imageStyle:{width:128},description:"\u6682\u65E0\u6570\u636E"})]}),(0,a.jsx)(s.v_,{loadMore:function(){return se(b)},hasMore:re})]})}}}]);
