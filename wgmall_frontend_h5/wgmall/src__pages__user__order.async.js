"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[786],{30096:function(I,v,a){a.d(v,{GD:function(){return j},Gj:function(){return f},Iw:function(){return _},LG:function(){return l},MX:function(){return C},PY:function(){return d},QK:function(){return s},RB:function(){return A},Sp:function(){return Z},ZZ:function(){return U},_r:function(){return S},aV:function(){return h},b7:function(){return u},dt:function(){return p},fY:function(){return M},if:function(){return L},kh:function(){return T},lz:function(){return R},mg:function(){return P},t0:function(){return n},yC:function(){return o}});var t=a(48047),m=a(53827),y=m.Z.create({baseURL:"https://api.xxzh.cc",withCredentials:!1,crossDomain:!0,timeout:1e4});function c(r){return request({url:"/task/grab",withCredentials:!1,method:"post",data:r})}function C(){return(0,t.Z)({url:"/products/random",method:"get"})}function p(r){return(0,t.Z)({url:"/products/random/type",method:"get",params:r})}function s(r){return(0,t.Z)({url:"/wishlist/add",method:"post",data:r})}function d(r){return(0,t.Z)({url:"/wishlist/"+r,method:"get"})}function n(r,D){return(0,t.Z)({url:"/wishlist/delete/".concat(r,"/").concat(D),method:"delete"})}function u(r){return(0,t.Z)({url:"/orders/buy",method:"post",data:r})}function l(r){return(0,t.Z)({url:"/orders/buy/all",method:"get",params:r})}function _(r){return(0,t.Z)({url:"/orders/buy/pending",method:"get",params:r})}function f(r){return(0,t.Z)({url:"/orders/buy/processing",method:"get",params:r})}function h(r){return(0,t.Z)({url:"/orders/buy/refunding",method:"get",params:r})}function P(r){return(0,t.Z)({url:"/orders/buy/delivered",method:"get",params:r})}function o(r){return(0,t.Z)({url:"/products/search",method:"get",params:r})}function M(r){return(0,t.Z)({url:"/shop/".concat(r.shopId,"/available-products"),method:"get",params:r})}function j(r){return(0,t.Z)({url:"/shop/products/priceRange",method:"get",params:r})}function U(r){return(0,t.Z)({url:"/shop/".concat(r.shopId,"/orders"),method:"get",params:r})}function A(r){return(0,t.Z)({url:"/shop/".concat(r,"/products"),method:"get",params:{size:100}})}function Z(r){return(0,t.Z)({url:"/shop/".concat(r,"/order/summary"),method:"get",params:{shopId:r}})}function S(r){return(0,t.Z)({url:"/shop/".concat(r.shopId,"/payOrder"),method:"post",data:r})}function L(r){return(0,t.Z)({url:"/shop/listProduct",method:"post",data:r})}function R(r){return(0,t.Z)({url:"/shop/products/editPrice",method:"post",data:r})}function T(r){return(0,t.Z)({url:"/shop/removeProduct",method:"post",data:r})}},23732:function(I,v,a){a.d(v,{$A:function(){return k},FL:function(){return r},H:function(){return A},IL:function(){return S},JR:function(){return T},Kn:function(){return l},S4:function(){return Z},Ue:function(){return u},Uy:function(){return K},Vb:function(){return B},_U:function(){return _},an:function(){return C},bZ:function(){return L},eY:function(){return D},iJ:function(){return U},jw:function(){return M},nn:function(){return j},o$:function(){return c},sg:function(){return z},um:function(){return s},vZ:function(){return N},wX:function(){return R},x4:function(){return P},yw:function(){return n},z2:function(){return p}});var t=a(48047),m=a(53827),y=m.Z.create({baseURL:"https://api.xxzh.cc",withCredentials:!1,crossDomain:!0,timeout:1e4});function c(e){return y({url:"/user/captcha/getCaptcha",withCredentials:!1,method:"get",params:e})}function C(e){return(0,t.Z)({url:"/user/captcha/getCaptcha",withCredentials:!1,method:"get",params:e})}function p(e){return(0,t.Z)({url:"/auth/register",withCredentials:!1,method:"post",data:e})}function s(e){return(0,t.Z)({url:"/user/user-detail/"+e.userId,withCredentials:!1,method:"get"})}function d(e){return request({url:"/wishlist/"+e.userId,withCredentials:!1,method:"get"})}function n(e){return(0,t.Z)({url:"/message/inbox",withCredentials:!1,method:"get",params:e})}function u(e){var W=e.id;return delete e.id,(0,t.Z)({url:"/address/create?userId="+W,withCredentials:!1,method:"post",data:e})}function l(e){return(0,t.Z)({url:"/address/get",withCredentials:!1,method:"get",params:e})}function _(e){return(0,t.Z)({url:"/address/update?userId="+e.id,withCredentials:!1,method:"post",data:e})}function f(e){return request({url:"/redbag/draw",withCredentials:!1,method:"post",data:e})}function h(e){return request({url:"/user/profit",withCredentials:!1,method:"get",params:e})}function P(e){return(0,t.Z)({url:"/auth/login",withCredentials:!1,method:"post",data:e})}function o(e){return request({url:"/redbag/signin",withCredentials:!1,method:"post",data:e})}function M(e){return(0,t.Z)({url:"/redbag/signin-and-draw",withCredentials:!1,method:"post",data:e})}function j(e){return(0,t.Z)({url:"/seller/apply",withCredentials:!1,method:"post",data:e})}function U(e){return(0,t.Z)({url:"/loan/apply",withCredentials:!1,method:"post",data:e})}function A(e){return(0,t.Z)({url:"/loan/loan",withCredentials:!1,method:"post",data:e})}function Z(e){return(0,t.Z)({url:"/loan/repay",withCredentials:!1,method:"post",data:e})}function S(e){return(0,t.Z)({url:"/withdrawal-records/user",withCredentials:!1,method:"post",data:e})}function L(e){return(0,t.Z)({url:"/recharge-records/username",withCredentials:!1,method:"get",params:e})}function R(e){return(0,t.Z)({url:"/recharge-records/user",withCredentials:!1,method:"post",data:e})}function T(e){return(0,t.Z)({url:"/withdrawal-records/username",withCredentials:!1,method:"get",params:e})}function r(e){return(0,t.Z)({url:"/shop/user/"+e,withCredentials:!1,method:"get"})}function D(e){return(0,t.Z)({url:"/user/info/"+e,withCredentials:!1,method:"get"})}function K(e){return(0,t.Z)({url:"/products/uploader-to-userid?uploader="+e.uploader,withCredentials:!1,method:"get"})}function z(e){return(0,t.Z)({url:"/user/eth/get",withCredentials:!1,method:"get",params:e})}function B(e){return(0,t.Z)({url:"/user/tron/get",withCredentials:!1,method:"get",params:e})}function N(e){return(0,t.Z)({url:"/user/eth/set",withCredentials:!1,method:"put",data:e})}function k(e){return(0,t.Z)({url:"/user/tron/set",withCredentials:!1,method:"put",data:e})}function G(){return fetch("https://api.ipify.org?format=json")}},48047:function(I,v,a){var t=a(31759),m=a.n(t),y=a(53827),c=a(50862),C=a(49634),p=y.Z.create({baseURL:"https://api.xxzh.cc",withCredentials:!1,crossDomain:!0,timeout:1e5});p.interceptors.request.use(function(s){if(s.url==="/auth/register"||s.url==="/auth/login")return s;(s.url==="/user/apply"||s.url==="/loan/apply")&&(s.headers["Content-Type"]="multipart/form-data");var d=localStorage.getItem("token");return d&&(s.headers.Authorization="Bearer "+d),s},function(s){return console.log(s),Promise.reject(s)}),p.interceptors.response.use(function(s){var d,n=s.data;if(console.log("response-->",n),Array.isArray(n))return Promise.resolve(n);if((d=n.data)!==null&&d!==void 0&&d.token&&(localStorage.setItem("token",n.data.token),localStorage.setItem("userInfo",JSON.stringify(n.data.user))),n.code!==200)return c.FN.show({icon:"fail",content:n.message}),Promise.resolve(n);if(n.code===200||n.message==="SUCCESS")return Promise.resolve(n);if(n.code===305||n.code===306){Promise.reject(n||"error");return}else return n.code===403?(c.FN.show({icon:"fail",content:n.message}),C.history.push("/login"),Promise.resolve(n||"error")):Promise.reject(n||"error")},function(s){return console.log(s,"error"),s.status===403&&(c.FN.show({icon:"fail",content:s.message}),localStorage.removeItem("token"),setTimeout(function(){C.history.push("/login")},1e3)),console.log("request error"+s,m()(s)),Promise.reject(s)}),v.Z=p},4090:function(I,v,a){a.d(v,{Bi:function(){return p},Vj:function(){return s},c9:function(){return d},dN:function(){return C}});var t=a(25298),m=a.n(t),y=a(17069),c=a.n(y);function C(n){return isNaN(n)?"0.00":Number(n).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function p(n){var u=new Date(n),l=u.getFullYear(),_=String(u.getMonth()+1).padStart(2,"0"),f=String(u.getDate()).padStart(2,"0"),h="".concat(l,"-").concat(_,"-").concat(f);return h}function s(n,u,l){for(var _={},f=100/l,h=0;h<=l;h++){var P=h*f,o=(n+(u-n)*P/100).toFixed(2);_[P]=parseFloat(o)}return _}var d=function(){function n(u){m()(this,n),this.url=u,this.ws=null,this.listeners=[],this.onOpenCallbacks=[]}return c()(n,[{key:"connect",value:function(){var l=this;this.ws||(this.ws=new window.WebSocket(this.url),this.ws.onopen=function(){l.onOpenCallbacks.forEach(function(_){return _()})},this.ws.onmessage=function(_){var f=_.data;try{f=JSON.parse(f)}catch(h){}l.listeners.forEach(function(h){return h(f)})})}},{key:"send",value:function(l){console.log(this.ws,"this.ws"),!(!this.ws||this.ws.readyState!==1)&&(typeof l!="string"&&(l=JSON.stringify(l)),this.ws.send(l))}},{key:"onMessage",value:function(l){this.listeners.push(l)}},{key:"close",value:function(){this.ws&&(this.ws.close(),this.ws=null)}},{key:"onOpen",value:function(l){this.onOpenCallbacks.push(l)}}]),n}()},48452:function(I,v,a){var t=a(50862),m=a(75271),y=a(5791),c=a(52676),C=function(s){var d=s.title,n=(0,y.s0)(),u=function(){n(-1)};return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(t.l2,{onBack:u,style:{background:"#fff",position:"sticky",top:0,zIndex:1e3},children:d})})};v.Z=C},23825:function(I,v,a){a.r(v),a.d(v,{default:function(){return U}});var t=a(90228),m=a.n(t),y=a(15558),c=a.n(y),C=a(87999),p=a.n(C),s=a(48305),d=a.n(s),n=a(50862),u={indexContainer:"indexContainer___mFp27",item:"item___wUBeg",itemRight:"itemRight___MiCBP"},l=a(4090),_=a(23732),f=a(75271),h=a(30096),P=a(48452),o=a(52676),M=function(Z){var S={0:h.LG,1:h.Iw,2:h.Gj,3:h.mg,4:h.aV};return S[Z]||null},j=function(){var Z=(0,f.useState)({}),S=d()(Z,2),L=S[0],R=S[1],T=(0,f.useState)(0),r=d()(T,2),D=r[0],K=r[1],z=(0,f.useState)([]),B=d()(z,2),N=B[0],k=B[1],G=(0,f.useState)(0),e=d()(G,2),W=e[0],J=e[1],Y=(0,f.useState)(!0),V=d()(Y,2),Q=V[0],F=V[1],X=function(){var i=p()(m()().mark(function g(){var E,x,w;return m()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return E=JSON.parse(localStorage.getItem("userInfo")),console.log(D,"activeIndex"),x=M(D),console.log(x,"api"),b.next=6,x({buyerName:E.username,page:W});case 6:if(w=b.sent,console.log(w,"orderData"),w.data.content.length!=0){b.next=10;break}return b.abrupt("return",F(!1));case 10:console.log(w,111),k(function($){return[].concat(c()($),c()(w.data.content)).length>=w.data.totalElements&&F(!1),J(W+1),[].concat(c()($),c()(w.data.content))});case 12:case"end":return b.stop()}},g)}));return function(){return i.apply(this,arguments)}}(),H=[{key:"0",title:"\u5168\u90E8"},{key:"1",title:"\u5F85\u53D1\u8D27"},{key:"2",title:"\u5F85\u6536\u8D27"},{key:"3",title:"\u5DF2\u9001\u8FBE"},{key:"4",title:"\u9000\u6B3E\u4E2D"}],q=function(){var i=p()(m()().mark(function g(){var E,x;return m()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return E=JSON.parse(localStorage.getItem("userInfo")),O.next=3,(0,_.um)({userId:E.id});case 3:x=O.sent,R(x.data);case 5:case"end":return O.stop()}},g)}));return function(){return i.apply(this,arguments)}}(),ee=function(){var i=p()(m()().mark(function g(E){return m()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:k([]),J(0),F(!0);case 3:case"end":return w.stop()}},g)}));return function(E){return i.apply(this,arguments)}}();return(0,f.useEffect)(function(){q()},[]),(0,o.jsxs)("div",{className:u.indexContainer,children:[(0,o.jsxs)("div",{className:u.indexBody,children:[(0,o.jsx)(P.Z,{title:"\u6211\u7684\u8BA2\u5355"}),(0,o.jsxs)(n.t8,{onRefresh:function(){console.log("PullToRefresh")},children:[(0,o.jsx)(n.mQ,{activeKey:H[D].key,style:{"--title-font-size":"18px","--content-padding":"18px","--active-line-color":"#333","--active-title-color":"#333"},onChange:function(g){var E=H.findIndex(function(x){return x.key===g});ee(g),K(E)},children:H.map(function(i){return(0,o.jsx)(n.mQ.Tab,{title:i.title},i.key)})}),N.length>0?(0,o.jsx)(n.aV,{style:{"--border-top":"none","--border-bottom":"none"},children:N.map(function(i,g){return(0,o.jsx)(n.aV.Item,{description:(0,o.jsx)("span",{style:{color:"#666",fontSize:20},children:i.content}),extra:(0,o.jsx)("span",{style:{color:"#aaa",fontSize:18},children:i.time}),onClick:function(){return handleRead(i.id)},style:{fontWeight:i.unread?700:400,background:i.unread?"linear-gradient(90deg, #f5f7fa 0%, #fff 100%)":"#fff",borderRadius:8,margin:"8px 16px",boxShadow:i.unread?"0 2px 8px rgba(60,80,120,0.06)":"none"},children:(0,o.jsxs)("div",{className:u.item,children:[(0,o.jsx)("div",{children:(0,o.jsx)("img",{src:"https://api.xxzh.cc"+i.product.imagePath,alt:""})}),(0,o.jsxs)("div",{className:u.itemRight,children:[(0,o.jsx)(n.mH,{direction:"end",rows:2,content:i.product.name}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("p",{children:["Order Num: ",i.orderNumber]}),(0,o.jsxs)("p",{children:["Time: ",i.createdAt]}),(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,o.jsxs)("span",{children:["Total Amount: ",i.totalAmount]}),(0,o.jsx)(n.Vp,{color:"warning",style:{fontSize:"12px"},children:i.status})]})]})]})]})},g)})}):(0,o.jsx)(n.HY,{style:{padding:"64px 0"},imageStyle:{width:128},description:"\u6682\u65E0\u6570\u636E"})]})]}),(0,o.jsx)(n.v_,{loadMore:X,hasMore:Q})]})},U=j}}]);
